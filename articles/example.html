<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Two examples of using mbquartR • mbquartR</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Two examples of using mbquartR">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">mbquartR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/mbquartR.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/example.html">Two examples of using mbquartR</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/alex-koiter/mbquartR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">



<link href="example_files/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="example_files/htmlwidgets-1.6.4/htmlwidgets.js"></script><link href="example_files/leaflet-1.3.1/leaflet.css" rel="stylesheet">
<script src="example_files/leaflet-1.3.1/leaflet.js"></script><link href="example_files/leafletfix-1.0.0/leafletfix.css" rel="stylesheet">
<script src="example_files/proj4-2.6.2/proj4.min.js"></script><script src="example_files/Proj4Leaflet-1.0.1/proj4leaflet.js"></script><link href="example_files/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet">
<script src="example_files/leaflet-binding-2.2.2/leaflet.js"></script><script src="example_files/leaflet-providers-2.0.0/leaflet-providers_2.0.0.js"></script><script src="example_files/leaflet-providers-plugin-2.2.2/leaflet-providers-plugin.js"></script><script src="example_files/clipboard-0.0.1/setClipboardText.js"></script><link href="example_files/mapviewCSS-0.0.1/mapview-popup.css" rel="stylesheet">
<link href="example_files/mapviewCSS-0.0.1/mapview.css" rel="stylesheet">
<link href="example_files/HomeButton-0.0.1/home-button.css" rel="stylesheet">
<script src="example_files/HomeButton-0.0.1/home-button.js"></script><script src="example_files/HomeButton-0.0.1/easy-button-src.min.js"></script><div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Two examples of using mbquartR</h1>
                        <h4 data-toc-skip class="author">Alex
Koiter</h4>
            
            <h4 data-toc-skip class="date">2025-02-04</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/alex-koiter/mbquartR/blob/main/vignettes/example.Rmd" class="external-link"><code>vignettes/example.Rmd</code></a></small>
      <div class="d-none name"><code>example.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://alexkoiter.ca/mbquartR/">mbquartR</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The <code>mbquartR</code> package was created to help people easily
identify, search, and locate parcels of land using the Manitoba legal
descriptions. These legal land descriptions originate from the <a href="https://en.wikipedia.org/wiki/Dominion_Land_Survey" class="external-link">Dominion Land
Survey system</a>, introduced in the late 19th century to organize the
European settlement and colonization of Western Canada.</p>
<p>There are two main ways in which the <code>mbquartR</code> can be
used.</p>
<ol style="list-style-type: decimal">
<li>Search for and locate parcels of land using legal land descriptions
(e.g., SW-9-8-6E1)</li>
</ol>
<p>or</p>
<ol start="2" style="list-style-type: decimal">
<li>Search for legal land description using coordinates (latitude and
longitude)</li>
</ol>
<p><strong>Note:</strong> The examples below are fictitious scenarios
designed to highlight the functionality of the <code>mbquartR</code>
package. The identified land parcels and coordinates are not intended
for any official or practical use.</p>
<div class="section level3">
<h3 id="example-1-using-legal-land-description-to-find-the-locations-of-archived-soil-samples">Example 1: Using legal land description to find the locations of
archived soil samples<a class="anchor" aria-label="anchor" href="#example-1-using-legal-land-description-to-find-the-locations-of-archived-soil-samples"></a>
</h3>
<p>Since 1926, the <a href="https://www.gov.mb.ca/agriculture/soil/soil-survey/index.html" class="external-link">Manitoba
Soil Survey</a> has been working to quantify and map soil properties
(texture, parent material, stoniness, pH, and salinity etc) to support
sustainable agricultural development across the province. Part of the
soil survey has included collecting soil samples for chemical analysis
(Carbon content). This has resulted in a rich archive of soil samples
spanning more than eight decades. Recently there has been interest in
reanalyzing these archived soil samples using new technology. However,
the location of many older soil samples is identified solely by the
quarter section description.</p>
<p>For many people, including myself, we are not familiar enough with
land survey system to easily locate it. There are over 900,000 entries
in the Manitoba Original Survey Legal Descriptions data covering more
than 600,000 km<sup>2</sup>. Most mapping services are also unable to
search for legal land description (e.g., Google Maps) which makes
identifying where these soil sample were taken very difficult!</p>
<p>For an explanation of quarter sections and other land types, please
visit the <a href="http://alexkoiter.ca/mbquartR/articles/mbquartR.html">Get
started</a> page.</p>
<div class="section level4">
<h4 id="scenario">Scenario:<a class="anchor" aria-label="anchor" href="#scenario"></a>
</h4>
<p>Here is a small data set that includes the soil organic carbon
content (%) of four topsoil samples (0-15 cm depth) collected in 1980 as
part of the Soil Survey at four different locations only identified by
their legal land description. I would like to know where these soil
samples were taken so I have some additional context for interpreting
the data. Three of these samples were collected in Quarter Sections
(most common type of land division) and one was collected in a River
Lot</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">soil_soc</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  soc <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1.72</span>, <span class="fl">2.35</span>, <span class="fl">3.08</span>, <span class="fl">3.94</span><span class="op">)</span>,</span>
<span>  legal <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"SW-14-8-2E1"</span>, <span class="st">"NE-22-08-1E"</span>, <span class="st">"NW-10-9-1E1"</span>, <span class="st">"RL-22-St. Norbert"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">soil_soc</span></span>
<span><span class="co">#&gt;    soc             legal</span></span>
<span><span class="co">#&gt; 1 1.72       SW-14-8-2E1</span></span>
<span><span class="co">#&gt; 2 2.35       NE-22-08-1E</span></span>
<span><span class="co">#&gt; 3 3.08       NW-10-9-1E1</span></span>
<span><span class="co">#&gt; 4 3.94 RL-22-St. Norbert</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="download-the-data-set">Download the data set<a class="anchor" aria-label="anchor" href="#download-the-data-set"></a>
</h4>
<p>Your first step is to download the Manitoba Original Survey Legal
Descriptions data from <a href="https://geoportal.gov.mb.ca/" class="external-link">DataMB</a>
which <code>mbquartR</code> helps you do.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/quarters_dl.html">quarters_dl</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="search">Search<a class="anchor" aria-label="anchor" href="#search"></a>
</h4>
<p>We can now use <code><a href="../reference/search_legal.html">search_legal()</a></code> to find the center
coordinates (latitude and longitude) for each of the parcels of land in
our data frame. To use this function you need to supply a vector that
contains the legal land descriptions of interest. This will return data
frame that includes the type of land division and the coordinates of the
centre.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">location_1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/search_legal.html">search_legal</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">soil_soc</span><span class="op">$</span><span class="va">legal</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in search_legal(x = soil_soc$legal): One or more of the legal land descriptions has an ambiguous meridian value E and is assumed to be east of prime meridian (E1).</span></span>
<span><span class="co">#&gt; To stop messages please specify meridians as E1 or E2 (e.g., NW-36-89-11E1).</span></span>
<span><span class="va">location_1</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 4 × 4</span></span></span>
<span><span class="co">#&gt;   legal             type     long   lat</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> NE-22-8-1E1       Quarter -<span style="color: #BB0000;">97.4</span>  49.7</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> NW-10-9-1E1       Quarter -<span style="color: #BB0000;">97.4</span>  49.7</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> SW-14-8-2E1       Quarter -<span style="color: #BB0000;">97.2</span>  49.7</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> RL-22-St. Norbert RL      -<span style="color: #BB0000;">97.1</span>  49.7</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="map">Map<a class="anchor" aria-label="anchor" href="#map"></a>
</h4>
<p>We can also use <code><a href="../reference/map_quarter.html">map_quarter()</a></code> to quickly plot the center
coordinates on a map. Because quarter sections are a square of known
dimensions a polygon is also displayed showing the approximate borders.
This is not done for other land divisions because the dimensions and
orientation are inconsistent.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/map_quarter.html">map_quarter</a></span><span class="op">(</span><span class="va">location_1</span><span class="op">)</span></span>
<span><span class="co">#&gt; Polygons for quarter sections are approximate and are only meant as</span></span>
<span><span class="co">#&gt;     a visual aid.</span></span>
<span><span class="co">#&gt; Warning: One or more of the legal land descriptions provided are a type of</span></span>
<span><span class="co">#&gt;     land division other than a quarter section and the polygon can not be</span></span>
<span><span class="co">#&gt;     estimated.</span></span></code></pre></div>
<div class="leaflet html-widget html-fill-item" id="htmlwidget-ac96cb3ee4656e2e9ec3" style="width:700px;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-ac96cb3ee4656e2e9ec3">{"x":{"options":{"minZoom":1,"maxZoom":52,"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"preferCanvas":false,"bounceAtZoomLimits":false,"maxBounds":[[[-90,-370]],[[90,370]]]},"calls":[{"method":"addProviderTiles","args":["Esri.WorldImagery","Esri.WorldImagery","Esri.WorldImagery",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"createMapPane","args":["polygon",420]},{"method":"addPolygons","args":[[[[{"lng":[-97.37939921873685,-97.36811231357645,-97.36811231357645,-97.37939921873685,-97.37939921873685],"lat":[49.67251228522832,49.67251228522832,49.67982560194719,49.67982560194719,49.67251228522832]}]],[[{"lng":[-97.39062141742758,-97.37932218710189,-97.37932218710189,-97.39062141742758,-97.39062141742758],"lat":[49.73157065207025,49.73157065207025,49.73888055983191,49.73888055983191,49.73157065207025]}]],[[{"lng":[-97.23082729013092,-97.21955566291918,-97.21955566291918,-97.23082729013092,-97.23082729013092],"lat":[49.6504579968861,49.6504579968861,49.6577714282756,49.6577714282756,49.6504579968861]}]]],null,"Polygon",{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"pane":"polygon","stroke":true,"color":"#000000","weight":2,"opacity":[0.9,0.9,0.9],"fill":true,"fillColor":["#440154","#31688E","#35B779"],"fillOpacity":[0.6,0.6,0.6],"smoothFactor":1,"noClip":false},["<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>1&emsp;<\/td><\/tr><tr><td>1<\/td><th>legal&emsp;<\/th><td>NE-22-8-1E1&emsp;<\/td><\/tr><tr><td>2<\/td><th>bbox&emsp;<\/th><td>sfc_POLYGON&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>2&emsp;<\/td><\/tr><tr><td>1<\/td><th>legal&emsp;<\/th><td>NW-10-9-1E1&emsp;<\/td><\/tr><tr><td>2<\/td><th>bbox&emsp;<\/th><td>sfc_POLYGON&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>3&emsp;<\/td><\/tr><tr><td>1<\/td><th>legal&emsp;<\/th><td>SW-14-8-2E1&emsp;<\/td><\/tr><tr><td>2<\/td><th>bbox&emsp;<\/th><td>sfc_POLYGON&emsp;<\/td><\/tr><\/table><\/div>"],{"maxWidth":800,"minWidth":50,"autoPan":true,"keepInView":false,"closeButton":true,"closeOnClick":true,"className":""},["NE-22-8-1E1","NW-10-9-1E1","SW-14-8-2E1"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},{"stroke":true,"weight":3,"opacity":0.9,"fillOpacity":0.84,"bringToFront":false,"sendToBack":false}]},{"method":"addScaleBar","args":[{"maxWidth":100,"metric":true,"imperial":true,"updateWhenIdle":true,"position":"bottomleft"}]},{"method":"addLegend","args":[{"colors":["#440154","#31688E","#35B779"],"labels":["NE-22-8-1E1","NW-10-9-1E1","SW-14-8-2E1"],"na_color":null,"na_label":"NA","opacity":1,"position":"topright","type":"factor","title":"Polygon","extra":null,"layerId":null,"className":"info legend","group":"Polygon"}]},{"method":"createMapPane","args":["point",440]},{"method":"addCircleMarkers","args":[[49.67616810272311,49.73522685134686,49.65411531542674,49.67879428716058],[-97.37375744585221,-97.38497264896806,-97.22519094341723,-97.14226871628324],6,null,"Centre",{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"pane":"point","stroke":true,"color":"#000000","weight":1,"opacity":[0.9,0.9,0.9,0.9],"fill":true,"fillColor":["#440154","#31688E","#35B779","#FDE725"],"fillOpacity":[0.6,0.6,0.6,0.6]},null,null,["<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>1&emsp;<\/td><\/tr><tr><td>1<\/td><th>legal&emsp;<\/th><td>NE-22-8-1E1&emsp;<\/td><\/tr><tr><td>2<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>2&emsp;<\/td><\/tr><tr><td>1<\/td><th>legal&emsp;<\/th><td>NW-10-9-1E1&emsp;<\/td><\/tr><tr><td>2<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>3&emsp;<\/td><\/tr><tr><td>1<\/td><th>legal&emsp;<\/th><td>SW-14-8-2E1&emsp;<\/td><\/tr><tr><td>2<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>4&emsp;<\/td><\/tr><tr><td>1<\/td><th>legal&emsp;<\/th><td>RL-22-St. Norbert&emsp;<\/td><\/tr><tr><td>2<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>"],{"maxWidth":800,"minWidth":50,"autoPan":true,"keepInView":false,"closeButton":true,"closeOnClick":true,"className":""},["NE-22-8-1E1","NW-10-9-1E1","SW-14-8-2E1","RL-22-St. Norbert"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addLayersControl","args":["Esri.WorldImagery",["Polygon","Centre"],{"collapsed":true,"autoZIndex":true,"position":"topleft"}]},{"method":"addLegend","args":[{"colors":["#440154","#31688E","#FDE725","#35B779"],"labels":["NE-22-8-1E1","NW-10-9-1E1","RL-22-St. Norbert","SW-14-8-2E1"],"na_color":null,"na_label":"NA","opacity":1,"position":"topright","type":"factor","title":"Centre","extra":null,"layerId":null,"className":"info legend","group":"Centre"}]},{"method":"addHomeButton","args":[-97.39062141742758,49.6504579968861,-97.14226871628324,49.73888055983191,true,null,"Zoom to full extent","<strong>Zoom full<\/strong>","bottomleft"]}],"limits":{"lat":[49.6504579968861,49.73888055983191],"lng":[-97.39062141742758,-97.21955566291918]},"fitBounds":[49.6504579968861,-97.39062141742758,49.73888055983191,-97.14226871628324,[]]},"evals":[],"jsHooks":{"render":[{"code":"function(el, x, data) {\n  return (\n      function(el, x, data) {\n      // get the leaflet map\n      var map = this; //HTMLWidgets.find('#' + el.id);\n      // we need a new div element because we have to handle\n      // the mouseover output separately\n      // debugger;\n      function addElement () {\n      // generate new div Element\n      var newDiv = $(document.createElement('div'));\n      // append at end of leaflet htmlwidget container\n      $(el).append(newDiv);\n      //provide ID and style\n      newDiv.addClass('lnlt');\n      newDiv.css({\n      'position': 'relative',\n      'bottomleft':  '0px',\n      'background-color': 'rgba(255, 255, 255, 0.7)',\n      'box-shadow': '0 0 2px #bbb',\n      'background-clip': 'padding-box',\n      'margin': '0',\n      'padding-left': '5px',\n      'color': '#333',\n      'font': '9px/1.5 \"Helvetica Neue\", Arial, Helvetica, sans-serif',\n      'z-index': '700',\n      });\n      return newDiv;\n      }\n\n\n      // check for already existing lnlt class to not duplicate\n      var lnlt = $(el).find('.lnlt');\n\n      if(!lnlt.length) {\n      lnlt = addElement();\n\n      // grab the special div we generated in the beginning\n      // and put the mousmove output there\n\n      map.on('mousemove', function (e) {\n      if (e.originalEvent.ctrlKey) {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                           ' lon: ' + (e.latlng.lng).toFixed(5) +\n                           ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                           ' | zoom: ' + map.getZoom() +\n                           ' | x: ' + L.CRS.EPSG3857.project(e.latlng).x.toFixed(0) +\n                           ' | y: ' + L.CRS.EPSG3857.project(e.latlng).y.toFixed(0) +\n                           ' | epsg: 3857 ' +\n                           ' | proj4: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs ');\n      } else {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                      ' | zoom: ' + map.getZoom() + ' ');\n      }\n      });\n\n      // remove the lnlt div when mouse leaves map\n      map.on('mouseout', function (e) {\n      var strip = document.querySelector('.lnlt');\n      if( strip !==null) strip.remove();\n      });\n\n      };\n\n      //$(el).keypress(67, function(e) {\n      map.on('preclick', function(e) {\n      if (e.originalEvent.ctrlKey) {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                      ' | zoom: ' + map.getZoom() + ' ');\n      var txt = document.querySelector('.lnlt').textContent;\n      console.log(txt);\n      //txt.innerText.focus();\n      //txt.select();\n      setClipboardText('\"' + txt + '\"');\n      }\n      });\n\n      }\n      ).call(this.getMap(), el, x, data);\n}","data":null},{"code":"function(el, x, data) {\n  return (function(el,x,data){\n           var map = this;\n\n           map.on('keypress', function(e) {\n               console.log(e.originalEvent.code);\n               var key = e.originalEvent.code;\n               if (key === 'KeyE') {\n                   var bb = this.getBounds();\n                   var txt = JSON.stringify(bb);\n                   console.log(txt);\n\n                   setClipboardText('\\'' + txt + '\\'');\n               }\n           })\n        }).call(this.getMap(), el, x, data);\n}","data":null}]}}</script>
</div>
</div>
<div class="section level3">
<h3 id="example-2-using-coordinates-to-find-parcels-of-land">Example 2: Using coordinates to find parcels of land<a class="anchor" aria-label="anchor" href="#example-2-using-coordinates-to-find-parcels-of-land"></a>
</h3>
<p>As an agri-environmental scientist I take a lot of soil samples on
farms as part of research projects and I always geo-locate sampling
sites so I can revisit them at a later date. When reporting results back
to producers/farmers it is often easiest to refer to locations by their
legal land descriptions because these descriptions are familiar and are
tied to how farmers manage their land. The example below presents a
small data frame of surface soil sample P concentrations (ppm), all
collected from the watershed, along with their corresponding
coordinates.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">soil_p</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  lat <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">49.333854</span>, <span class="fl">49.338577</span>, <span class="fl">49.356048</span>, <span class="fl">49.372180</span><span class="op">)</span>,</span>
<span>  long <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">98.376486</span>, <span class="op">-</span><span class="fl">98.376862</span>, <span class="op">-</span><span class="fl">98.304846</span>, <span class="op">-</span><span class="fl">98.254691</span><span class="op">)</span>,</span>
<span>  p_conc <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">8.75</span>, <span class="fl">12.30</span>, <span class="fl">17.45</span>, <span class="fl">22.60</span><span class="op">)</span>,</span>
<span>  sample_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">4</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">soil_p</span></span>
<span><span class="co">#&gt;        lat      long p_conc sample_id</span></span>
<span><span class="co">#&gt; 1 49.33385 -98.37649   8.75         1</span></span>
<span><span class="co">#&gt; 2 49.33858 -98.37686  12.30         2</span></span>
<span><span class="co">#&gt; 3 49.35605 -98.30485  17.45         3</span></span>
<span><span class="co">#&gt; 4 49.37218 -98.25469  22.60         4</span></span></code></pre></div>
<div class="section level4">
<h4 id="search-1">Search<a class="anchor" aria-label="anchor" href="#search-1"></a>
</h4>
<p>Using <code><a href="../reference/search_coord.html">search_coord()</a></code> we provide coordinates, in decimal
degrees, and it searches for the quarter section, or other land division
type, based on the shortest euclidean distance to the centre of a parcel
of land. Because the data being search is so big this function can take
a little while to run. This function returns the legal land description,
land division type, the center coordinates, user coordinates, and the
distance between the user provided coordinates and the centre
coordinates. In the example below I have collected soil samples from two
different farm fields that happen to be within the same quarter
section</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">location_2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/search_coord.html">search_coord</a></span><span class="op">(</span>lat <span class="op">=</span> <span class="va">soil_p</span><span class="op">$</span><span class="va">lat</span>, long <span class="op">=</span> <span class="va">soil_p</span><span class="op">$</span><span class="va">long</span><span class="op">)</span></span>
<span><span class="va">location_2</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 4 × 7</span></span></span>
<span><span class="co">#&gt;   legal       type     long   lat long_user lat_user dist</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494;">[m]</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> NW-29-4-7W1 Quarter -<span style="color: #BB0000;">98.4</span>  49.3     -<span style="color: #BB0000;">98.4</span>     49.3 414.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> NW-29-4-7W1 Quarter -<span style="color: #BB0000;">98.4</span>  49.3     -<span style="color: #BB0000;">98.4</span>     49.3 370.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> SE-2-5-7W1  Quarter -<span style="color: #BB0000;">98.3</span>  49.4     -<span style="color: #BB0000;">98.3</span>     49.4 361.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> SE-7-5-6W1  Quarter -<span style="color: #BB0000;">98.3</span>  49.4     -<span style="color: #BB0000;">98.3</span>     49.4 168.</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="map-1">Map<a class="anchor" aria-label="anchor" href="#map-1"></a>
</h4>
<p>For a quick reference I can quickly plot the centre coordinates and
the approximate boundaries of these quarter sections using
<code><a href="../reference/map_quarter.html">map_quarter()</a></code>.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/map_quarter.html">map_quarter</a></span><span class="op">(</span><span class="va">location_2</span><span class="op">)</span></span>
<span><span class="co">#&gt; Polygons for quarter sections are approximate and are only meant as</span></span>
<span><span class="co">#&gt;     a visual aid.</span></span></code></pre></div>
<div class="leaflet html-widget html-fill-item" id="htmlwidget-e5c8c404fe174e4c81bd" style="width:700px;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-e5c8c404fe174e4c81bd">{"x":{"options":{"minZoom":1,"maxZoom":52,"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"preferCanvas":false,"bounceAtZoomLimits":false,"maxBounds":[[[-90,-370]],[[90,370]]]},"calls":[{"method":"addProviderTiles","args":["Esri.WorldImagery","Esri.WorldImagery","Esri.WorldImagery",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"createMapPane","args":["polygon",420]},{"method":"addPolygons","args":[[[[{"lng":[-98.38628346354474,-98.37507792672578,-98.37507792672578,-98.38628346354474,-98.38628346354474],"lat":[49.33271219334983,49.33271219334983,49.34003007785618,49.34003007785618,49.33271219334983]}]],[[{"lng":[-98.30714176549473,-98.29593114342472,-98.29593114342472,-98.30714176549473,-98.30714176549473],"lat":[49.3548086936152,49.3548086936152,49.36212248502562,49.36212248502562,49.3548086936152]}]],[[{"lng":[-98.26187996902276,-98.25065444397868,-98.25065444397868,-98.26187996902276,-98.26187996902276],"lat":[49.36963447376272,49.36963447376272,49.37694997523546,49.37694997523546,49.36963447376272]}]]],null,"Polygon",{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"pane":"polygon","stroke":true,"color":"#000000","weight":2,"opacity":[0.9,0.9,0.9],"fill":true,"fillColor":["#440154","#21908C","#FDE725"],"fillOpacity":[0.6,0.6,0.6],"smoothFactor":1,"noClip":false},["<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>1&emsp;<\/td><\/tr><tr><td>1<\/td><th>legal&emsp;<\/th><td>NW-29-4-7W1&emsp;<\/td><\/tr><tr><td>2<\/td><th>bbox&emsp;<\/th><td>sfc_POLYGON&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>2&emsp;<\/td><\/tr><tr><td>1<\/td><th>legal&emsp;<\/th><td>SE-2-5-7W1&emsp;<\/td><\/tr><tr><td>2<\/td><th>bbox&emsp;<\/th><td>sfc_POLYGON&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>3&emsp;<\/td><\/tr><tr><td>1<\/td><th>legal&emsp;<\/th><td>SE-7-5-6W1&emsp;<\/td><\/tr><tr><td>2<\/td><th>bbox&emsp;<\/th><td>sfc_POLYGON&emsp;<\/td><\/tr><\/table><\/div>"],{"maxWidth":800,"minWidth":50,"autoPan":true,"keepInView":false,"closeButton":true,"closeOnClick":true,"className":""},["NW-29-4-7W1","SE-2-5-7W1","SE-7-5-6W1"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},{"stroke":true,"weight":3,"opacity":0.9,"fillOpacity":0.84,"bringToFront":false,"sendToBack":false}]},{"method":"addScaleBar","args":[{"maxWidth":100,"metric":true,"imperial":true,"updateWhenIdle":true,"position":"bottomleft"}]},{"method":"addLegend","args":[{"colors":["#440154","#21908C","#FDE725"],"labels":["NW-29-4-7W1","SE-2-5-7W1","SE-7-5-6W1"],"na_color":null,"na_label":"NA","opacity":1,"position":"topright","type":"factor","title":"Polygon","extra":null,"layerId":null,"className":"info legend","group":"Polygon"}]},{"method":"createMapPane","args":["point",440]},{"method":"addCircleMarkers","args":[[49.336371458031,49.35846553276216,49.37329160832163],[-98.38068075012924,-98.30153383850384,-98.25625975878893],6,null,"Centre",{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"pane":"point","stroke":true,"color":"#000000","weight":1,"opacity":[0.9,0.9,0.9],"fill":true,"fillColor":["#440154","#21908C","#FDE725"],"fillOpacity":[0.6,0.6,0.6]},null,null,["<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>1&emsp;<\/td><\/tr><tr><td>1<\/td><th>legal&emsp;<\/th><td>NW-29-4-7W1&emsp;<\/td><\/tr><tr><td>2<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>2&emsp;<\/td><\/tr><tr><td>1<\/td><th>legal&emsp;<\/th><td>SE-2-5-7W1&emsp;<\/td><\/tr><tr><td>2<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>3&emsp;<\/td><\/tr><tr><td>1<\/td><th>legal&emsp;<\/th><td>SE-7-5-6W1&emsp;<\/td><\/tr><tr><td>2<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>"],{"maxWidth":800,"minWidth":50,"autoPan":true,"keepInView":false,"closeButton":true,"closeOnClick":true,"className":""},["NW-29-4-7W1","SE-2-5-7W1","SE-7-5-6W1"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addLayersControl","args":["Esri.WorldImagery",["Polygon","Centre"],{"collapsed":true,"autoZIndex":true,"position":"topleft"}]},{"method":"addLegend","args":[{"colors":["#440154","#21908C","#FDE725"],"labels":["NW-29-4-7W1","SE-2-5-7W1","SE-7-5-6W1"],"na_color":null,"na_label":"NA","opacity":1,"position":"topright","type":"factor","title":"Centre","extra":null,"layerId":null,"className":"info legend","group":"Centre"}]},{"method":"addHomeButton","args":[-98.38628346354474,49.33271219334983,-98.25065444397868,49.37694997523546,true,null,"Zoom to full extent","<strong>Zoom full<\/strong>","bottomleft"]}],"limits":{"lat":[49.33271219334983,49.37694997523546],"lng":[-98.38628346354474,-98.25065444397868]},"fitBounds":[49.33271219334983,-98.38628346354474,49.37694997523546,-98.25065444397868,[]]},"evals":[],"jsHooks":{"render":[{"code":"function(el, x, data) {\n  return (\n      function(el, x, data) {\n      // get the leaflet map\n      var map = this; //HTMLWidgets.find('#' + el.id);\n      // we need a new div element because we have to handle\n      // the mouseover output separately\n      // debugger;\n      function addElement () {\n      // generate new div Element\n      var newDiv = $(document.createElement('div'));\n      // append at end of leaflet htmlwidget container\n      $(el).append(newDiv);\n      //provide ID and style\n      newDiv.addClass('lnlt');\n      newDiv.css({\n      'position': 'relative',\n      'bottomleft':  '0px',\n      'background-color': 'rgba(255, 255, 255, 0.7)',\n      'box-shadow': '0 0 2px #bbb',\n      'background-clip': 'padding-box',\n      'margin': '0',\n      'padding-left': '5px',\n      'color': '#333',\n      'font': '9px/1.5 \"Helvetica Neue\", Arial, Helvetica, sans-serif',\n      'z-index': '700',\n      });\n      return newDiv;\n      }\n\n\n      // check for already existing lnlt class to not duplicate\n      var lnlt = $(el).find('.lnlt');\n\n      if(!lnlt.length) {\n      lnlt = addElement();\n\n      // grab the special div we generated in the beginning\n      // and put the mousmove output there\n\n      map.on('mousemove', function (e) {\n      if (e.originalEvent.ctrlKey) {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                           ' lon: ' + (e.latlng.lng).toFixed(5) +\n                           ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                           ' | zoom: ' + map.getZoom() +\n                           ' | x: ' + L.CRS.EPSG3857.project(e.latlng).x.toFixed(0) +\n                           ' | y: ' + L.CRS.EPSG3857.project(e.latlng).y.toFixed(0) +\n                           ' | epsg: 3857 ' +\n                           ' | proj4: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs ');\n      } else {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                      ' | zoom: ' + map.getZoom() + ' ');\n      }\n      });\n\n      // remove the lnlt div when mouse leaves map\n      map.on('mouseout', function (e) {\n      var strip = document.querySelector('.lnlt');\n      if( strip !==null) strip.remove();\n      });\n\n      };\n\n      //$(el).keypress(67, function(e) {\n      map.on('preclick', function(e) {\n      if (e.originalEvent.ctrlKey) {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                      ' | zoom: ' + map.getZoom() + ' ');\n      var txt = document.querySelector('.lnlt').textContent;\n      console.log(txt);\n      //txt.innerText.focus();\n      //txt.select();\n      setClipboardText('\"' + txt + '\"');\n      }\n      });\n\n      }\n      ).call(this.getMap(), el, x, data);\n}","data":null},{"code":"function(el, x, data) {\n  return (function(el,x,data){\n           var map = this;\n\n           map.on('keypress', function(e) {\n               console.log(e.originalEvent.code);\n               var key = e.originalEvent.code;\n               if (key === 'KeyE') {\n                   var bb = this.getBounds();\n                   var txt = JSON.stringify(bb);\n                   console.log(txt);\n\n                   setClipboardText('\\'' + txt + '\\'');\n               }\n           })\n        }).call(this.getMap(), el, x, data);\n}","data":null}]}}</script><p>I can also add my sampling locations to the map by first converting
my original data frame to an <code>sf</code> object.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">point</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span><span class="va">soil_p</span>, coords <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"long"</span>, <span class="st">"lat"</span><span class="op">)</span>,</span>
<span>                      crs <span class="op">=</span> <span class="st">"+proj=longlat +datum=WGS84"</span><span class="op">)</span></span></code></pre></div>
<p>Then adding this <code>sf</code> object as an additional layer</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/map_quarter.html">map_quarter</a></span><span class="op">(</span><span class="va">location_2</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">mapview</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/mapview/man/mapView.html" class="external-link">mapview</a></span><span class="op">(</span><span class="va">point</span>, col.regions <span class="op">=</span> <span class="st">"black"</span>, </span>
<span>                   color <span class="op">=</span> <span class="st">"black"</span>, legend <span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#&gt; Polygons for quarter sections are approximate and are only meant as</span></span>
<span><span class="co">#&gt;     a visual aid.</span></span></code></pre></div>
<div class="leaflet html-widget html-fill-item" id="htmlwidget-36aa3d2a04d42bbc2145" style="width:700px;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-36aa3d2a04d42bbc2145">{"x":{"options":{"minZoom":1,"maxZoom":52,"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"preferCanvas":false,"bounceAtZoomLimits":false,"maxBounds":[[[-90,-370]],[[90,370]]]},"calls":[{"method":"addProviderTiles","args":["Esri.WorldImagery","Esri.WorldImagery","Esri.WorldImagery",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"createMapPane","args":["polygon",420]},{"method":"addPolygons","args":[[[[{"lng":[-98.38628346354474,-98.37507792672578,-98.37507792672578,-98.38628346354474,-98.38628346354474],"lat":[49.33271219334983,49.33271219334983,49.34003007785618,49.34003007785618,49.33271219334983]}]],[[{"lng":[-98.30714176549473,-98.29593114342472,-98.29593114342472,-98.30714176549473,-98.30714176549473],"lat":[49.3548086936152,49.3548086936152,49.36212248502562,49.36212248502562,49.3548086936152]}]],[[{"lng":[-98.26187996902276,-98.25065444397868,-98.25065444397868,-98.26187996902276,-98.26187996902276],"lat":[49.36963447376272,49.36963447376272,49.37694997523546,49.37694997523546,49.36963447376272]}]]],null,"Polygon",{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"pane":"polygon","stroke":true,"color":"#000000","weight":2,"opacity":[0.9,0.9,0.9],"fill":true,"fillColor":["#440154","#21908C","#FDE725"],"fillOpacity":[0.6,0.6,0.6],"smoothFactor":1,"noClip":false},["<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>1&emsp;<\/td><\/tr><tr><td>1<\/td><th>legal&emsp;<\/th><td>NW-29-4-7W1&emsp;<\/td><\/tr><tr><td>2<\/td><th>bbox&emsp;<\/th><td>sfc_POLYGON&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>2&emsp;<\/td><\/tr><tr><td>1<\/td><th>legal&emsp;<\/th><td>SE-2-5-7W1&emsp;<\/td><\/tr><tr><td>2<\/td><th>bbox&emsp;<\/th><td>sfc_POLYGON&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>3&emsp;<\/td><\/tr><tr><td>1<\/td><th>legal&emsp;<\/th><td>SE-7-5-6W1&emsp;<\/td><\/tr><tr><td>2<\/td><th>bbox&emsp;<\/th><td>sfc_POLYGON&emsp;<\/td><\/tr><\/table><\/div>"],{"maxWidth":800,"minWidth":50,"autoPan":true,"keepInView":false,"closeButton":true,"closeOnClick":true,"className":""},["NW-29-4-7W1","SE-2-5-7W1","SE-7-5-6W1"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},{"stroke":true,"weight":3,"opacity":0.9,"fillOpacity":0.84,"bringToFront":false,"sendToBack":false}]},{"method":"addScaleBar","args":[{"maxWidth":100,"metric":true,"imperial":true,"updateWhenIdle":true,"position":"bottomleft"}]},{"method":"addLegend","args":[{"colors":["#440154","#21908C","#FDE725"],"labels":["NW-29-4-7W1","SE-2-5-7W1","SE-7-5-6W1"],"na_color":null,"na_label":"NA","opacity":1,"position":"topright","type":"factor","title":"Polygon","extra":null,"layerId":null,"className":"info legend","group":"Polygon"}]},{"method":"createMapPane","args":["point",440]},{"method":"addCircleMarkers","args":[[49.336371458031,49.35846553276216,49.37329160832163],[-98.38068075012924,-98.30153383850384,-98.25625975878893],6,null,"Centre",{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"pane":"point","stroke":true,"color":"#000000","weight":1,"opacity":[0.9,0.9,0.9],"fill":true,"fillColor":["#440154","#21908C","#FDE725"],"fillOpacity":[0.6,0.6,0.6]},null,null,["<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>1&emsp;<\/td><\/tr><tr><td>1<\/td><th>legal&emsp;<\/th><td>NW-29-4-7W1&emsp;<\/td><\/tr><tr><td>2<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>2&emsp;<\/td><\/tr><tr><td>1<\/td><th>legal&emsp;<\/th><td>SE-2-5-7W1&emsp;<\/td><\/tr><tr><td>2<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>3&emsp;<\/td><\/tr><tr><td>1<\/td><th>legal&emsp;<\/th><td>SE-7-5-6W1&emsp;<\/td><\/tr><tr><td>2<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>"],{"maxWidth":800,"minWidth":50,"autoPan":true,"keepInView":false,"closeButton":true,"closeOnClick":true,"className":""},["NW-29-4-7W1","SE-2-5-7W1","SE-7-5-6W1"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addLegend","args":[{"colors":["#440154","#21908C","#FDE725"],"labels":["NW-29-4-7W1","SE-2-5-7W1","SE-7-5-6W1"],"na_color":null,"na_label":"NA","opacity":1,"position":"topright","type":"factor","title":"Centre","extra":null,"layerId":null,"className":"info legend","group":"Centre"}]},{"method":"addCircleMarkers","args":[[49.333854,49.338577,49.356048,49.37218],[-98.376486,-98.376862,-98.304846,-98.25469099999999],6,null,"point",{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"pane":"point","stroke":true,"color":"#000000","weight":1,"opacity":0.9,"fill":true,"fillColor":"#000000","fillOpacity":0.6},null,null,["<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>1&emsp;<\/td><\/tr><tr><td>1<\/td><th>p_conc&emsp;<\/th><td> 8.75&emsp;<\/td><\/tr><tr><td>2<\/td><th>sample_id&emsp;<\/th><td>1&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>2&emsp;<\/td><\/tr><tr><td>1<\/td><th>p_conc&emsp;<\/th><td>12.30&emsp;<\/td><\/tr><tr><td>2<\/td><th>sample_id&emsp;<\/th><td>2&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>3&emsp;<\/td><\/tr><tr><td>1<\/td><th>p_conc&emsp;<\/th><td>17.45&emsp;<\/td><\/tr><tr><td>2<\/td><th>sample_id&emsp;<\/th><td>3&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>4&emsp;<\/td><\/tr><tr><td>1<\/td><th>p_conc&emsp;<\/th><td>22.60&emsp;<\/td><\/tr><tr><td>2<\/td><th>sample_id&emsp;<\/th><td>4&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>"],{"maxWidth":800,"minWidth":50,"autoPan":true,"keepInView":false,"closeButton":true,"closeOnClick":true,"className":""},["1","2","3","4"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addHomeButton","args":[-98.376862,49.333854,-98.25469099999999,49.37218,true,"point","Zoom to point","<strong> point <\/strong>","bottomright"]},{"method":"addLayersControl","args":["Esri.WorldImagery",["Polygon","Centre","point"],{"collapsed":true,"autoZIndex":true,"position":"topleft"}]},{"method":"addHomeButton","args":[-98.38628346354474,49.33271219334983,-98.25065444397868,49.37694997523546,true,null,"Zoom to full extent","<strong>Zoom full<\/strong>","bottomleft"]}],"limits":{"lat":[49.33271219334983,49.37694997523546],"lng":[-98.38628346354474,-98.25065444397868]},"fitBounds":[49.33271219334983,-98.38628346354474,49.37694997523546,-98.25065444397868,[]]},"evals":[],"jsHooks":{"render":[{"code":"function(el, x, data) {\n  return (\n      function(el, x, data) {\n      // get the leaflet map\n      var map = this; //HTMLWidgets.find('#' + el.id);\n      // we need a new div element because we have to handle\n      // the mouseover output separately\n      // debugger;\n      function addElement () {\n      // generate new div Element\n      var newDiv = $(document.createElement('div'));\n      // append at end of leaflet htmlwidget container\n      $(el).append(newDiv);\n      //provide ID and style\n      newDiv.addClass('lnlt');\n      newDiv.css({\n      'position': 'relative',\n      'bottomleft':  '0px',\n      'background-color': 'rgba(255, 255, 255, 0.7)',\n      'box-shadow': '0 0 2px #bbb',\n      'background-clip': 'padding-box',\n      'margin': '0',\n      'padding-left': '5px',\n      'color': '#333',\n      'font': '9px/1.5 \"Helvetica Neue\", Arial, Helvetica, sans-serif',\n      'z-index': '700',\n      });\n      return newDiv;\n      }\n\n\n      // check for already existing lnlt class to not duplicate\n      var lnlt = $(el).find('.lnlt');\n\n      if(!lnlt.length) {\n      lnlt = addElement();\n\n      // grab the special div we generated in the beginning\n      // and put the mousmove output there\n\n      map.on('mousemove', function (e) {\n      if (e.originalEvent.ctrlKey) {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                           ' lon: ' + (e.latlng.lng).toFixed(5) +\n                           ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                           ' | zoom: ' + map.getZoom() +\n                           ' | x: ' + L.CRS.EPSG3857.project(e.latlng).x.toFixed(0) +\n                           ' | y: ' + L.CRS.EPSG3857.project(e.latlng).y.toFixed(0) +\n                           ' | epsg: 3857 ' +\n                           ' | proj4: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs ');\n      } else {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                      ' | zoom: ' + map.getZoom() + ' ');\n      }\n      });\n\n      // remove the lnlt div when mouse leaves map\n      map.on('mouseout', function (e) {\n      var strip = document.querySelector('.lnlt');\n      if( strip !==null) strip.remove();\n      });\n\n      };\n\n      //$(el).keypress(67, function(e) {\n      map.on('preclick', function(e) {\n      if (e.originalEvent.ctrlKey) {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                      ' | zoom: ' + map.getZoom() + ' ');\n      var txt = document.querySelector('.lnlt').textContent;\n      console.log(txt);\n      //txt.innerText.focus();\n      //txt.select();\n      setClipboardText('\"' + txt + '\"');\n      }\n      });\n\n      }\n      ).call(this.getMap(), el, x, data);\n}","data":null},{"code":"function(el, x, data) {\n  return (function(el,x,data){\n           var map = this;\n\n           map.on('keypress', function(e) {\n               console.log(e.originalEvent.code);\n               var key = e.originalEvent.code;\n               if (key === 'KeyE') {\n                   var bb = this.getBounds();\n                   var txt = JSON.stringify(bb);\n                   console.log(txt);\n\n                   setClipboardText('\\'' + txt + '\\'');\n               }\n           })\n        }).call(this.getMap(), el, x, data);\n}","data":null}]}}</script>
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Alex Koiter.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
